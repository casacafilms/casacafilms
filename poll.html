<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thanks for your vote — Casaca Films</title>
  <meta name="robots" content="noindex, nofollow" />
  <style>
    :root {
      --bg: #0b0b0c;
      --card: #141416;
      --text: #f6f7f9;
      --muted: #b6bbc6;
      --accent: #ffc857; /* subtle gold */
      --ok: #22c55e;
      --err: #ef4444;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, #1b1b20 0%, var(--bg) 60%);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .card {
      width: 100%;
      max-width: 640px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 28px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      backdrop-filter: blur(6px);
    }
    .logo { display: inline-flex; align-items: center; gap: 10px; color: var(--text); text-decoration: none; font-weight: 600; letter-spacing: 0.3px; }
    .check { width: 60px; height: 60px; border-radius: 50%; display: grid; place-items: center; margin: 8px 0 16px; background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.35); }
    h1 { font-size: 28px; line-height: 1.2; margin: 0 0 8px; }
    p { margin: 0 0 10px; color: var(--muted); }
    .choice { margin-top: 8px; padding: 10px 12px; background: rgba(255, 200, 87, 0.08); border: 1px solid rgba(255, 200, 87, 0.35); border-radius: 10px; color: #ffe6a6; display: none; }
    .small { font-size: 14px; color: var(--muted); }
    .foot { margin-top: 18px; font-size: 13px; color: var(--muted); opacity: 0.9; }

    form { margin-top: 14px; display: none; }
    label { display: block; font-size: 14px; color: var(--muted); margin: 8px 0 6px; }
    textarea { width: 100%; min-height: 120px; resize: vertical; background: #0f0f12; color: var(--text); border: 1px solid rgba(255,255,255,0.12); border-radius: 10px; padding: 10px 12px; font: inherit; }
    .actions { display: flex; align-items: center; gap: 10px; margin-top: 12px; }
    .submit { background: var(--accent); color: #111; border: 1px solid rgba(0,0,0,0.25); cursor: pointer; padding: 12px 16px; border-radius: 10px; font-weight: 700; display: inline-flex; align-items: center; justify-content: center; }
    .submit:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .submit[disabled] { opacity: 0.6; cursor: not-allowed; }
    .ok { color: var(--ok); }
    .err { color: var(--err); }
  </style>
</head>
<body>
  <main class="card" aria-live="polite">
    <a class="logo" href="#" aria-label="Casaca Films">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7.5h14.5" stroke="#fff" stroke-width="1.5" stroke-linecap="round" opacity=".7"/><path d="M3 12h18" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/><path d="M3 16.5h10" stroke="#fff" stroke-width="1.5" stroke-linecap="round" opacity=".7"/></svg>
      Casaca Films
    </a>

    <div class="check" role="img" aria-label="Vote recorded">
      <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--ok)"><polyline points="20 6 9 17 4 12"/></svg>
    </div>

    <h1>Thanks for your vote!</h1>
    <p>Your choice was recorded. We’ll share results in the next Friday email.</p>

    <div id="choice" class="choice"></div>

    <!-- Q&A form (shown only when vot=7) -->
    <form id="qa-form" autocomplete="on" novalidate>
      <label for="question">Your question</label>
      <textarea id="question" name="question" placeholder="Ask me anything about live workflows, PTZ, color, audio, solo-operator flow…" required autofocus></textarea>
      <div class="actions">
        <button class="submit" id="send" type="submit">Send question</button>
      </div>
      <p id="status" class="small" role="status"></p>
      <p class="small">We’ll only use your question to plan the live. No spam, no resale.</p>
    </form>

    <p class="foot">If you got here by mistake, no worries — you’re all good.</p>
  </main>

  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const vot = params.get('vot') || params.get('vote') || params.get('option');

      const labels = {
        '1': 'Video Editing in Premiere Pro',
        '2': 'Video Editing in DaVinci Resolve',
        '3': 'Color Grading in DaVinci Resolve',
        '4': 'Blackmagic Camera App (iPhone or Camera)',
        '5': 'My Full Creative Process (1 video, end to end)',
        '6': 'How to Film Yourself (Solo Creator flow)',
        '7': 'Open Q&A (send me anything)'
      };

      const choiceEl = document.getElementById('choice');
      const formEl = document.getElementById('qa-form');
      const statusEl = document.getElementById('status');
      const sendBtn = document.getElementById('send');

      if (vot) {
        const label = labels[String(vot)] || ('Option ' + String(vot));
        choiceEl.textContent = 'You picked: ' + label;
        choiceEl.style.display = 'block';
      }

      const isQA = String(vot) === '7';
      if (isQA) {
        formEl.style.display = 'block';
      }

      if (window.history && window.history.replaceState) {
        const clean = window.location.origin + window.location.pathname;
        window.history.replaceState({}, document.title, clean);
      }

      const ENDPOINT = 'https://script.google.com/macros/s/AKfycby_T8-Rd02bHhxnGTqu2JLrhzU1KkYyznqRy6JABYAEKN_CZ87pSqxtPdbf5a7rVPc/exec';

      formEl?.addEventListener('submit', (e) => {
        e.preventDefault();
        const question = document.getElementById('question').value.trim();
        if (!question) {
          statusEl.textContent = 'Please write a question first.';
          statusEl.className = 'small err';
          return;
        }

        // Show success immediately (fire-and-forget). The Sheet write happens in the background.
        statusEl.textContent = 'Saved. Thanks for your question!';
        statusEl.className = 'small ok';
        sendBtn.disabled = true;

        const payload = { question };
        try {
          fetch(ENDPOINT, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'text/plain;charset=utf-8' },
            body: JSON.stringify(payload)
          });
        } catch (_) { /* ignore */ }

        formEl.reset();
        setTimeout(() => { sendBtn.disabled = false; }, 600);
      });
    })();
  </script>

  <noscript>
    <p class="small">Your vote was received. (Enable JavaScript to see your chosen option.)</p>
  </noscript>
</body>
</html>
